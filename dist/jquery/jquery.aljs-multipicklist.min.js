if("undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");!function(e){var t='<li draggable="true" id="{{optionId}}" class="slds-picklist__item slds-has-icon slds-has-icon--left" aria-selected="false" tabindex="0" role="option"><span class="slds-truncate"><span>{{optionLabel}}</span></span></li>',i=function(t,i){this.$el=e(t),this.$selectedContainer=this.$el.find('[data-aljs-multi-picklist="selected"]').find("ul"),this.$unselectedContainer=this.$el.find('[data-aljs-multi-picklist="unselected"]').find("ul"),this.selectedItems=i.selectedItems,this.unselectedItems=i.unselectedItems,this.settings=i,this.init()};i.prototype={constructor:i,init:function(){this.renderPicklists(),this.$el.find('[data-aljs-multi-picklist="unselect"]').on("click",this,this.unselectOption),this.$el.find('[data-aljs-multi-picklist="select"]').on("click",this,this.selectOption),this.$el.find('[data-aljs-multi-picklist="move-up"]').on("click",this,this.moveOptionUp),this.$el.find('[data-aljs-multi-picklist="move-down"]').on("click",this,this.moveOptionDown)},renderPicklists:function(){var t=this;this.unselectedItems.forEach(function(e){t.$unselectedContainer.append(t.createPicklistDomItem(e))}),this.$unselectedContainer.on("click","li",function(i){e(this).addClass("slds-is-selected").attr("aria-selected","true").siblings().removeClass("slds-is-selected").attr("aria-selected","false"),t.itemToSelect=e(this).data("aljs-picklist-obj")}).on("dragstart","li",function(i){t.itemToSelect=e(this).data("aljs-picklist-obj")}).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}).on("dragenter",function(e){e.preventDefault(),e.stopPropagation()}).on("drop",function(e){e.preventDefault(),e.stopPropagation(),t.$el.find('[data-aljs-multi-picklist="unselect"]').click()}),this.selectedItems.forEach(function(e){t.$selectedContainer.append(t.createPicklistDomItem(e))}),this.$selectedContainer.on("click","li",function(i){e(this).addClass("slds-is-selected").attr("aria-selected","true").siblings().removeClass("slds-is-selected").attr("aria-selected","false"),t.itemToUnselect=e(this).data("aljs-picklist-obj")}).on("dragstart","li",function(i){t.itemToUnselect=e(this).data("aljs-picklist-obj")}).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}).on("dragenter",function(e){e.preventDefault(),e.stopPropagation()}).on("drop",function(e){e.preventDefault(),e.stopPropagation(),t.$el.find('[data-aljs-multi-picklist="select"]').click()})},selectOption:function(e){var t=e.data;t.itemToSelect&&(t.$unselectedContainer.find("#"+t.itemToSelect.id).removeClass("slds-is-selected").attr("aria-selected","false").appendTo(t.$selectedContainer),t.unselectedItems.splice(t.unselectedItems.indexOf(t.itemToSelect),1),t.selectedItems.push(t.itemToSelect),t.itemToSelect=null)},unselectOption:function(e){var t=e.data;t.itemToUnselect&&(t.$selectedContainer.find("#"+t.itemToUnselect.id).removeClass("slds-is-selected").attr("aria-selected","false").appendTo(t.$unselectedContainer),t.selectedItems.splice(t.selectedItems.indexOf(t.itemToUnselect),1),t.unselectedItems.push(t.itemToUnselect),t.itemToUnselect=null)},moveOptionUp:function(e){var t=e.data;if(t.itemToUnselect){var i=t.selectedItems.indexOf(t.itemToUnselect);if(i>0){t.selectedItems.splice(i,1),t.selectedItems.splice(i-1,0,t.itemToUnselect);var s=t.$selectedContainer.find("#"+t.itemToUnselect.id);s.removeClass("slds-is-selected").attr("aria-selected","false").insertBefore(s.prev("li")),t.itemToUnselect=null}}},moveOptionDown:function(e){var t=e.data;if(t.itemToUnselect){var i=t.selectedItems.indexOf(t.itemToUnselect);if(i<t.selectedItems.length-1){t.selectedItems.splice(i,1),t.selectedItems.splice(i+1,0,t.itemToUnselect);var s=t.$selectedContainer.find("#"+t.itemToUnselect.id);s.removeClass("slds-is-selected").attr("aria-selected","false").insertAfter(s.next("li")),t.itemToUnselect=null}}},createPicklistDomItem:function(i){return e(t.replace("{{optionId}}",i.id).replace("{{optionLabel}}",i.label)).data("aljs-picklist-obj",i)},setSelectedItems:function(e){var t=this;if(e&&e.length>0){var i=this.unselectedItems.filter(function(t){return-1!==e.indexOf(t.id)});i.forEach(function(e){t.itemToSelect=e,t.$el.find('[data-aljs-multi-picklist="select"]').click()})}},setUnselectedItems:function(e){var t=this;if(e&&e.length>0){var i=this.selectedItems.filter(function(t){return-1!==e.indexOf(t.id)});i.forEach(function(e){t.itemToUnselect=e,t.$el.find('[data-aljs-multi-picklist="unselect"]').click()})}},getSelectedItems:function(){return this.selectedItems},getUnselectedItems:function(){return this.unselectedItems}},e.fn.multiPicklist=function(t){var s,l=arguments,n=e.extend({selectedItems:[],unselectedItems:[],assetsLocation:e.aljs.assetsLocation},"object"==typeof t?t:{});if(this.each(function(){var c=e(this),a=c.data("aljs-multi-picklist");if(!a){var o=new i(this,n);c.data("aljs-multi-picklist",a=o)}"string"==typeof t&&(s=a[t](l[1],l[2]))}),void 0===s||s instanceof i)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return s}}(jQuery);