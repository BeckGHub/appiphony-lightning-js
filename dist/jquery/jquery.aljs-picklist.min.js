if("undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");!function(s){var e=function(e,o){this.$el=s(e),this.obj={checkmarkIcon:'<svg aria-hidden="true" class="slds-icon slds-icon--selected slds-icon--x-small slds-icon-text-default slds-m-right--small"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+s.aljs.assetsLocation+'/assets/icons/utility-sprite/svg/symbols.svg#check"></use></svg>'},this.settings=o,this.bindTrigger(),this.bindChoices()};e.prototype={constructor:e,bindTrigger:function(){var e=this,o=this.$el;this.obj.$trigger=s(".slds-button",o),this.obj.$dropdown=s(".slds-dropdown",o),this.obj.$choices=s(".slds-dropdown__item a",o),this.obj.$trigger.unbind().click(function(o){o.stopPropagation(),e.obj.id=s(this).attr("id"),e.obj.$dropdown.is(":hidden")?(s('[data-aljs="picklist"]').not(e.$el).picklist("close"),e.obj.$dropdown.show(),null===e.obj.valueId||"undefined"==typeof e.obj.valueId?e.focusedIndex=0:e.focusedIndex=e.obj.$dropdown.find("li").index(e.obj.$dropdown.find("#"+e.obj.valueId)),e.focusOnElement(),e.obj.$dropdown.on("keyup",e,e.processKeypress)):(e.obj.$dropdown.hide(),e.obj.$dropdown.unbind("keyup",e.processKeypress))}),s("body").click(function(){e.obj.$dropdown.hide(),e.obj.$dropdown.unbind("keyup",e.processKeypress)})},processKeypress:function(s){var e=s.data,o=e.obj.$choices.length;40===s.keyCode?(e.focusedIndex=e.focusedIndex===o-1?0:e.focusedIndex+1,e.focusOnElement()):38===s.keyCode&&(e.focusedIndex=0===e.focusedIndex?o-1:e.focusedIndex-1,e.focusOnElement())},focusOnElement:function(){this.obj.$choices.eq(this.focusedIndex).focus()},bindChoices:function(){var e=this;this.obj.$valueContainer=s("> span",this.obj.$trigger),this.obj.$choices.unbind().click(function(o){o.stopPropagation();var i=s(this).closest("li").attr("id");e.setValueAndUpdateDom(i),e.settings.onChange(e.obj)})},setValueAndUpdateDom:function(s){var e=this.$el.find("#"+s);this.obj.value=e.find("a").html(),this.obj.valueId=s,this.obj.$dropdown.hide(),this.obj.$dropdown.unbind("keyup",this.processKeypress),this.obj.$trigger.trigger("change.aljs.picklist").focus(),this.obj.$valueContainer.html(this.obj.value),this.obj.$choices.parent().removeClass("slds-is-selected").find(".slds-icon").remove(),e.addClass("slds-is-selected").find("a").prepend(this.obj.checkmarkIcon)},setValue:function(s,e){this.setValueAndUpdateDom(s),e&&this.settings.onChange(this.obj)},getValueId:function(){return this.obj.valueId},close:function(){this.obj.$dropdown.hide(),this.obj.$dropdown.unbind("keyup",this.processKeypress)}},s.fn.picklist=function(o){var i,n=arguments,t=s.extend({assetsLocation:s.aljs.assetsLocation,onChange:function(s){}},"object"==typeof o?o:{});if(this.each(function(){var d=s(this),c=d.data("aljs-picklist");if(!c){var r=new e(this,t);d.data("aljs-picklist",c=r)}"string"==typeof o&&(i=c[o](n[1],n[2]))}),void 0===i||i instanceof e)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return i}}(jQuery);