if("undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");!function(e){var t='<div class="slds-lookup__menu" role="listbox"><ul class="slds-lookup__list" role="presentation"></ul></div>',s='<div class="slds-lookup__item"><button class="slds-button"><svg aria-hidden="true" class="slds-icon slds-icon-text-default slds-icon--small"><use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#search"></use></svg>&quot;{{searchTerm}}&quot; in {{itemLookupPluralLabel}}</button></div>',l='<li class="slds-lookup__item"><a id="{{resultId}}" href="#" role="option"><svg aria-hidden="true" class="slds-icon slds-icon-standard-account slds-icon--small"><use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use></svg>{{resultLabel}}</a></li>',i=function(t,s){this.$el=e(t),this.$lookupContainer=this.$el.closest(".slds-lookup"),this.settings=s,this.isStringEmpty(s.searchTerm)||this.$el.val(s.searchTerm),this.initLookup()};i.prototype={constructor:i,isStringEmpty:function(e){return null===e||"undefined"==typeof e||""===e.trim()},initLookup:function(){this.$el.on("focus",this,this.runSearch).on("keyup",this,this.runSearch).on("blur",this,this.handleBlur)},runSearch:function(e){var t=e.data,s=t.$el.val();t.isStringEmpty(s)?t.getDefaultResults():t.getSearchTermResults(s)},getSearchTermResults:function(e){var t=this;if(this.settings.items.length>0)this.searchResults=this.settings.items.filter(function(t){return null!==t.label.match(e)}),this.renderSearchResults();else{var s=function(e){t.searchResults=e,t.renderSearchResults()};this.settings.filledSearchTermQuery(e,s)}},getDefaultResults:function(){var e=this;if(this.settings.items.length>0)this.searchResults=this.settings.items,this.renderSearchResults();else{var t=function(t){e.searchResults=t,e.renderSearchResults()};this.settings.emptySearchTermQuery(t)}},renderSearchResults:function(){this.$lookupSearchContainer&&(this.$lookupSearchContainer.remove(),this.$lookupSearchContainer=null);var i=e(t),n=i.find("ul.slds-lookup__list"),r=this.$el.val();!this.isStringEmpty(r)&&r.length>1&&n.append(s.replace("{{searchTerm}}",r).replace("{{itemLookupPluralLabel}}",this.settings.itemLookupPluralLabel)),this.searchResults.forEach(function(e){n.append(l.replace("{{resultLabel}}",e.label).replace("{{resultId}}",e.id))}),this.settings.allowAdd,n.on("click","a",this,this.clickResult),this.$lookupSearchContainer=i,i.appendTo(this.$lookupContainer)},handleBlur:function(t){var s=t.data;0===e(t.relatedTarget).closest(".slds-lookup__menu").length&&s.$lookupSearchContainer&&(s.$lookupSearchContainer.remove(),s.$lookupSearchContainer=null)},clickResult:function(t){var s=t.data,l=e(this).attr("id");s.selectResult(l)},selectResult:function(e){var t=this.searchResults.filter(function(t){return t.id==e});this.selectedResult=t.length>0?t[0]:null,this.$lookupSearchContainer.remove(),this.$lookupSearchContainer=null,this.$el.val(this.selectedResult.label)}},e.fn.lookup=function(t){var s,l=arguments,n=e.extend({assetsLocation:e.aljs.assetsLocation,itemLookupPluralLabel:"Stuffs",itemLookupLabel:"Stuff",searchTerm:"",items:[],emptySearchTermQuery:function(){callback([])},filledSearchTermQuery:function(e,t){t([])},clickAddFunction:null},"object"==typeof t?t:{});if(this.each(function(){var r=e(this),o=r.data("aljs-lookup");if(!o){var a=new i(this,n);r.data("aljs-lookup",o=a)}"string"==typeof t&&(s=o[t](l[1],l[2]))}),void 0===s||s instanceof Picklist)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return s}}(jQuery);