if("undefined"==typeof jQuery)throw new Error("The Salesforce Lightning JavaScript Toolkit requires jQuery");if("undefined"==typeof moment)throw new Error("The Salesforce Lightning JavaScript Toolkit requires momentjs");!function(e){var t='<div class="slds-dropdown slds-dropdown--left slds-datepicker" aria-hidden="false" data-selection="single"><div class="slds-datepicker__filter slds-grid"><div class="slds-datepicker__filter--month slds-grid slds-grid--align-spread slds-size--3-of-4"><div class="slds-align-middle"><button id="sljs-prevButton" class="slds-button slds-button--icon-container"><svg aria-hidden="true" class="slds-button__icon slds-button__icon--small"><use xlink:href="{{sldsUrl}}/assets/icons/utility-sprite/svg/symbols.svg#left"></use></svg><span class="slds-assistive-text">Previous Month</span></button></div><h2 id="month" class="slds-align-middle" aria-live="assertive" aria-atomic="true"></h2><div class="slds-align-middle"><button id="sljs-nextButton" class="slds-button slds-button--icon-container"><svg aria-hidden="true" class="slds-button__icon slds-button__icon--small"><use xlink:href="{{sldsUrl}}/assets/icons/utility-sprite/svg/symbols.svg#right"></use></svg><span class="slds-assistive-text">Next Month</span></button></div></div><div class="slds-picklist datepicker__filter--year slds-shrink-none"><button id="year" class="slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true"><span id="sljs-year"></span><svg aria-hidden="true" class="slds-icon slds-icon--small"><use xlink:href="{{sldsUrl}}/assets/icons/utility-sprite/svg/symbols.svg#down"></use></svg></button></div></div>',s='<table class="datepicker__month" role="grid" aria-labelledby="month"><thead><tr id="weekdays"><th id="Sunday"><abbr title="Sunday">S</abbr></th><th id="Monday"><abbr title="Monday">M</abbr></th><th id="Tuesday"><abbr title="Tuesday">T</abbr></th><th id="Wednesday"><abbr title="Wednesday">W</abbr></th><th id="Thursday"><abbr title="Thursday">T</abbr></th><th id="Friday"><abbr title="Friday">F</abbr></th><th id="Saturday"><abbr title="Saturday">S</abbr></th></tr></thead><tbody></tbody></table></div>',a=function(a,l){var i=moment(l.initDate)||moment();this.$el=e(a),this.$datepickerEl=e(t.replace(/{{sldsUrl}}/g,l.assetsLocation)+s),this.options=l,l.initDate&&this.setSelectedFullDate(i),this.initInteractivity()};a.prototype={constructor:a,initInteractivity:function(){var t=this,s=this.$datepickerEl,a=this.$el;a.on("focus",function(l){var i=t.selectedFullDate||moment();t.viewedMonth=i.month(),t.viewedYear=i.year(),t.fillMonth(),a.closest(".slds-form-element").next(s).length>0?s.show():(a.closest(".slds-form-element").after(s),e([a,s]).each(function(){e(this).on("click",t.blockClose)}))}),s.on("click",this,this.processClick),e("body").on("click",function(e){t.closeDatepicker()})},fillMonth:function(){var t=this.options.dayLabels,s=this.getMonthArray(),a=e("<tbody>");s.forEach(function(s){var l=e("<tr>").appendTo(a);s.forEach(function(s,a){var i=e('<td data-sljs-date="'+s.dateValue+'">').appendTo(l);i.prop({headers:t[a].full,role:"gridcell"}),e('<span class="slds-day">'+s.value+"</span>").appendTo(i),s.isCurrentMonth||(i.addClass("slds-disabled-text"),i.prop("aria-disabled","true")),s.isSelected?(i.prop("aria-selected","true"),i.addClass("slds-is-selected")):i.prop("aria-selected","false"),s.isToday&&i.addClass("slds-is-today")})}),this.$datepickerEl.find("tbody").replaceWith(a),this.$datepickerEl.find("#month").text(this.options.monthLabels[this.viewedMonth].full),this.$datepickerEl.find("#sljs-year").text(this.viewedYear)},showYearDropdown:function(){for(var t=e('<div id="sljs-yearDropdown" class="slds-dropdown slds-dropdown--menu">'),s=e('<ul class="slds-dropdown__list" style="max-height: 13.5rem; overflow-y:auto;"></ul>').appendTo(t),a=this.viewedYear,l=moment().year(),i='<svg aria-hidden="true" class="slds-icon slds-icon--small slds-icon--left"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsUrl}}/assets/icons/standard-sprite/svg/symbols.svg#task2" data-reactid=".46.0.0.1:$=10:0.0.$=11:0.0.0.0"></use></svg>'.replace(/{{sldsUrl}}/g,this.options.assetsLocation),n=l-this.options.numYearsBefore;n<=l+this.options.numYearsAfter;n++){var d=e('<li id="sljs-yearDropdown'+n+'" class="slds-dropdown__item" data-sljs-year="'+n+'">').appendTo(s),r=e('<a href="#" class="slds-truncate slds-has-icon--left" role="menuitemradio"><span>'+n+"</span></a>").appendTo(d);a===n?(d.prop("aria-selected","true"),r.addClass("slds-is-selected"),r.prepend(i)):d.prop("aria-selected","false")}this.$datepickerEl.find("#year").after(t),s.scrollTop(this.$datepickerEl.find("#sljs-yearDropdown"+a).position().top)},hideYearDropdown:function(){this.$datepickerEl.find("#sljs-yearDropdown").remove()},getMMDDYYYY:function(e,t,s){return(e>9?e:"0"+e)+"/"+(t>9?t:"0"+t)+"/"+s},getMonthArray:function(){for(var e=this.selectedFullDate,t=(e?e.date():null,e?e.month():null,e?e.year():null,this.viewedMonth),s=this.viewedYear,a=0===t?11:t-1,l=11===t?0:t+1,i=this.getNumDaysInMonth(s,t),n=this.getNumDaysInMonth(s,a),d=(this.getNumDaysInMonth(s,l),new Date(s,t,1).getDay()),r=[],o=[],c=(this.dayLabels,n-(d-1));n>=c;c++){var u=moment(new Date(s,t,c));r.push({value:c,dateValue:this.getMMDDYYYY(a+1,c,s),isCurrentMonth:!1,isSelected:!e&&u.isSame(e,"day"),isToday:u.isSame(moment(),"day")})}for(var c=1;i>=c;c++){var u=moment(new Date(s,t,c));r.push({value:c,dateValue:this.getMMDDYYYY(t+1,c,s),isCurrentMonth:!0,isSelected:e&&u.isSame(e,"day"),isToday:u.isSame(moment(),"day")})}if(r.forEach(function(e,t){t%7===0&&o.push([]),o[o.length-1].push(e)}),o[o.length-1].length<7)for(var u=moment(new Date(s,t,c)),h=7-o[o.length-1].length,c=1;h>=c;c++)o[o.length-1].push({value:c,dateValue:this.getMMDDYYYY(l+1,c,0===l?s+1:s),isCurrentMonth:!1,isSelected:e&&u.isSame(e,"day"),isToday:u.isSame(moment(),"day")});return o},setSelectedFullDate:function(e){this.selectedFullDate=e,this.$el.val(e.format(this.options.format))},processClick:function(t){t.preventDefault();var s=t.data,a=e(t.target);a.closest("#sljs-prevButton").length>0&&s.clickPrev(t),a.closest("#sljs-nextButton").length>0&&s.clickNext(t),a.closest("td[data-sljs-date]").length>0&&s.clickDate(t),a.closest("li[data-sljs-year]").length>0&&s.clickYear(t),a.closest("#year").length>0?s.clickYearDropdown(t):s.hideYearDropdown()},clickPrev:function(e){var t=e.data;0===t.viewedMonth?(t.viewedMonth=11,t.viewedYear--):t.viewedMonth--,t.fillMonth()},clickNext:function(e){var t=e.data;11===t.viewedMonth?(t.viewedMonth=0,t.viewedYear++):t.viewedMonth++,t.fillMonth()},clickYear:function(t){var s=t.data,a=e(t.target).closest("li[data-sljs-year]");s.viewedYear=parseInt(a.data("sljs-year")),s.fillMonth()},clickYearDropdown:function(e){var t=e.data;t.$datepickerEl.find("#sljs-yearDropdown").length>0?t.hideYearDropdown():t.showYearDropdown()},clickDate:function(t){var s=t.data,a=e(t.target).closest("td[data-sljs-date]");if(!a.hasClass("slds-disabled-text")){var l=a.data("sljs-date");s.setSelectedFullDate(moment(l,"MM/DD/YYYY")),s.closeDatepicker()}},closeDatepicker:function(){var e=this.$datepickerEl,t=this.$el;t.closest(".slds-form-element").next(e).hide()},blockClose:function(e){e.stopPropagation()},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getNumDaysInMonth:function(e,t){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDate:function(e){return e?this.selectedFullDate.format(e):this.selectedFullDate},setDate:function(e){this.setSelectedFullDate(moment(e))}},e.fn.datepicker=function(t,s){var l=e.extend({assetsLocation:"",numYearsBefore:50,numYearsAfter:10,format:"MM/DD/YYYY",dayLabels:[{full:"Sunday",abbv:"S"},{full:"Monday",abbv:"M"},{full:"Tuesday",abbv:"T"},{full:"Wednesday",abbv:"W"},{full:"Thursday",abbv:"T"},{full:"Friday",abbv:"F"},{full:"Saturday",abbv:"S"}],monthLabels:[{full:"January",abbv:""},{full:"February",abbv:""},{full:"March",abbv:""},{full:"April",abbv:""},{full:"May",abbv:""},{full:"June",abbv:""},{full:"July",abbv:""},{full:"August",abbv:""},{full:"September",abbv:""},{full:"October",abbv:""},{full:"November",abbv:""},{full:"December",abbv:""}]},"object"==typeof t?t:{});return this.each(function(){var i=e(this),n=i.data("datepicker");n||i.data("datepicker",n=new a(this,l)),"string"==typeof t&&n[t](s)})}}(jQuery);