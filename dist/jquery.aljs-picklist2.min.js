!function(o){var s=function(s,e){this.$el=o(s),this.obj={checkmarkIcon:'<svg aria-hidden="true" class="slds-icon slds-icon--small slds-icon--left"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+e.assetsLocation+'/assets/icons/standard-sprite/svg/symbols.svg#task2"></use></svg>'},this.settings=e,this.bindTrigger(),this.bindChoices()};s.prototype={constructor:s,bindTrigger:function(){var s=this,e=this.$el;this.obj.$trigger=o(".slds-button",e),this.obj.$dropdown=o(".slds-dropdown",e),this.obj.$choices=o(".slds-dropdown__item a",e),this.obj.$trigger.unbind().click(function(e){e.stopPropagation(),s.obj.id=o(this).attr("id"),s.obj.$dropdown.is(":hidden")?(s.obj.$dropdown.show(),null===s.obj.valueId||"undefined"==typeof s.obj.valueId?s.focusedIndex=0:s.focusedIndex=s.obj.$dropdown.find("li").index(s.obj.$dropdown.find("#"+s.obj.valueId)),s.focusOnElement(),s.obj.$dropdown.on("keyup",s,s.processKeypress)):(s.obj.$dropdown.hide(),s.obj.$dropdown.unbind("keyup",s.processKeypress))}),o("body").click(function(){s.obj.$dropdown.hide(),s.obj.$dropdown.unbind("keyup",s.processKeypress)})},processKeypress:function(o){var s=o.data,e=s.obj.$choices.length;console.log("click"),40===o.keyCode?(s.focusedIndex=s.focusedIndex===e-1?0:s.focusedIndex+1,s.focusOnElement()):38===o.keyCode&&(s.focusedIndex=0===s.focusedIndex?e-1:s.focusedIndex-1,s.focusOnElement())},focusOnElement:function(){this.obj.$choices.eq(this.focusedIndex).focus()},bindChoices:function(){var s=this;this.obj.$valueContainer=o("> span",this.obj.$trigger),this.obj.$choices.unbind().click(function(e){e.stopPropagation();var n=o(this).closest("li").attr("id");s.setValueAndUpdateDom(n),s.settings.onChange(s.obj)})},setValueAndUpdateDom:function(o){var s=this.$el.find("#"+o);this.obj.value=s.find("a").html(),this.obj.valueId=o,this.obj.$dropdown.hide(),this.obj.$dropdown.unbind("keyup",this.processKeypress),this.obj.$trigger.trigger("aljs.picklistchange").focus(),this.obj.$valueContainer.html(this.obj.value),this.obj.$choices.parent().removeClass("slds-is-selected").find(".slds-icon").remove(),s.addClass("slds-is-selected").find("a").append(this.obj.checkmarkIcon)},setValue:function(o,s){this.setValueAndUpdateDom(o),s&&this.settings.onChange(this.obj)},getValueId:function(){return this.obj.valueId}},o.fn.picklist=function(e){var n,i=arguments,t=o.extend({assetsLocation:"",onChange:function(o){}},"object"==typeof e?e:{});if(this.each(function(){var d=o(this),c=d.data("aljs-picklist");if(!c){var r=new s(this,t);d.data("aljs-picklist",c=r)}"string"==typeof e&&(n=c[e](i[1],i[2]))}),void 0===n||n instanceof s)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return n}}(jQuery);