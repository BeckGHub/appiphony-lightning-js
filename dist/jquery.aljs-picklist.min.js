if("undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");!function(o){var e=function(e,s){this.$el=o(e),this.obj={checkmarkIcon:'<svg aria-hidden="true" class="slds-icon slds-icon--small slds-icon--left"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+s.assetsLocation+'/assets/icons/standard-sprite/svg/symbols.svg#task2"></use></svg>'},this.settings=s,this.bindTrigger(),this.bindChoices()};e.prototype={constructor:e,bindTrigger:function(){var e=this,s=this.$el;this.obj.$trigger=o(".slds-button",s),this.obj.$dropdown=o(".slds-dropdown",s),this.obj.$choices=o(".slds-dropdown__item a",s),this.obj.$trigger.unbind().click(function(s){s.stopPropagation(),e.obj.id=o(this).attr("id"),e.obj.$dropdown.is(":hidden")?(e.obj.$dropdown.show(),null===e.obj.valueId||"undefined"==typeof e.obj.valueId?e.focusedIndex=0:e.focusedIndex=e.obj.$dropdown.find("li").index(e.obj.$dropdown.find("#"+e.obj.valueId)),e.focusOnElement(),e.obj.$dropdown.on("keyup",e,e.processKeypress)):(e.obj.$dropdown.hide(),e.obj.$dropdown.unbind("keyup",e.processKeypress))}),o("body").click(function(){e.obj.$dropdown.hide(),e.obj.$dropdown.unbind("keyup",e.processKeypress)})},processKeypress:function(o){var e=o.data,s=e.obj.$choices.length;console.log("click"),40===o.keyCode?(e.focusedIndex=e.focusedIndex===s-1?0:e.focusedIndex+1,e.focusOnElement()):38===o.keyCode&&(e.focusedIndex=0===e.focusedIndex?s-1:e.focusedIndex-1,e.focusOnElement())},focusOnElement:function(){this.obj.$choices.eq(this.focusedIndex).focus()},bindChoices:function(){var e=this;this.obj.$valueContainer=o("> span",this.obj.$trigger),this.obj.$choices.unbind().click(function(s){s.stopPropagation();var n=o(this).closest("li").attr("id");e.setValueAndUpdateDom(n),e.settings.onChange(e.obj)})},setValueAndUpdateDom:function(o){var e=this.$el.find("#"+o);this.obj.value=e.find("a").html(),this.obj.valueId=o,this.obj.$dropdown.hide(),this.obj.$dropdown.unbind("keyup",this.processKeypress),this.obj.$trigger.trigger("aljs.picklistchange").focus(),this.obj.$valueContainer.html(this.obj.value),this.obj.$choices.parent().removeClass("slds-is-selected").find(".slds-icon").remove(),e.addClass("slds-is-selected").find("a").append(this.obj.checkmarkIcon)},setValue:function(o,e){this.setValueAndUpdateDom(o),e&&this.settings.onChange(this.obj)},getValueId:function(){return this.obj.valueId}},o.fn.picklist=function(s){var n,i=arguments,t=o.extend({assetsLocation:o.aljs.assetsLocation,onChange:function(o){}},"object"==typeof s?s:{});if(this.each(function(){var d=o(this),c=d.data("aljs-picklist");if(!c){var r=new e(this,t);d.data("aljs-picklist",c=r)}"string"==typeof s&&(n=c[s](i[1],i[2]))}),void 0===n||n instanceof e)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return n}}(jQuery);