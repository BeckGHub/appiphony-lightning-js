if("undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");!function(s){var o=function(o,e){this.$el=s(o),this.obj={checkmarkIcon:'<svg aria-hidden="true" class="slds-icon slds-icon--small slds-icon--left"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+e.assetsLocation+'/assets/icons/standard-sprite/svg/symbols.svg#task2"></use></svg>'},this.settings=e,this.bindTrigger(),this.bindChoices()};o.prototype={constructor:o,bindTrigger:function(){var o=this,e=this.$el;this.obj.$trigger=s(".slds-button",e),this.obj.$dropdown=s(".slds-dropdown",e),this.obj.$choices=s(".slds-dropdown__item a",e),this.obj.$trigger.unbind().click(function(e){e.stopPropagation(),o.obj.id=s(this).attr("id"),o.obj.$dropdown.is(":hidden")?(s('[data-aljs="picklist"]').not(o.$el).picklist("close"),o.obj.$dropdown.show(),null===o.obj.valueId||"undefined"==typeof o.obj.valueId?o.focusedIndex=0:o.focusedIndex=o.obj.$dropdown.find("li").index(o.obj.$dropdown.find("#"+o.obj.valueId)),o.focusOnElement(),o.obj.$dropdown.on("keyup",o,o.processKeypress)):(o.obj.$dropdown.hide(),o.obj.$dropdown.unbind("keyup",o.processKeypress))}),s("body").click(function(){o.obj.$dropdown.hide(),o.obj.$dropdown.unbind("keyup",o.processKeypress)})},processKeypress:function(s){var o=s.data,e=o.obj.$choices.length;40===s.keyCode?(o.focusedIndex=o.focusedIndex===e-1?0:o.focusedIndex+1,o.focusOnElement()):38===s.keyCode&&(o.focusedIndex=0===o.focusedIndex?e-1:o.focusedIndex-1,o.focusOnElement())},focusOnElement:function(){this.obj.$choices.eq(this.focusedIndex).focus()},bindChoices:function(){var o=this;this.obj.$valueContainer=s("> span",this.obj.$trigger),this.obj.$choices.unbind().click(function(e){e.stopPropagation();var n=s(this).closest("li").attr("id");o.setValueAndUpdateDom(n),o.settings.onChange(o.obj)})},setValueAndUpdateDom:function(s){var o=this.$el.find("#"+s);this.obj.value=o.find("a").html(),this.obj.valueId=s,this.obj.$dropdown.hide(),this.obj.$dropdown.unbind("keyup",this.processKeypress),this.obj.$trigger.trigger("aljs.picklistchange").focus(),this.obj.$valueContainer.html(this.obj.value),this.obj.$choices.parent().removeClass("slds-is-selected").find(".slds-icon").remove(),o.addClass("slds-is-selected").find("a").append(this.obj.checkmarkIcon)},setValue:function(s,o){this.setValueAndUpdateDom(s),o&&this.settings.onChange(this.obj)},getValueId:function(){return this.obj.valueId},close:function(){this.obj.$dropdown.hide(),this.obj.$dropdown.unbind("keyup",this.processKeypress)}},s.fn.picklist=function(e){var n,i=arguments,t=s.extend({assetsLocation:s.aljs.assetsLocation,onChange:function(s){}},"object"==typeof e?e:{});if(this.each(function(){var d=s(this),c=d.data("aljs-picklist");if(!c){var r=new o(this,t);d.data("aljs-picklist",c=r)}"string"==typeof e&&(n=c[e](i[1],i[2]))}),void 0===n||n instanceof o)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return n}}(jQuery);