if("undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");!function(s){var e=function(e,o){this.$el=s(e),this.settings=o,this.obj={},this.bindTrigger(),this.bindChoices()};e.prototype={constructor:e,bindTrigger:function(){var e=this,o=this.$el;this.obj.$trigger=s(".slds-form-element__label, .slds-lookup__search-input, .slds-button",o),this.obj.$dropdown=s(".slds-dropdown__list",o),this.obj.$choices=s(".slds-dropdown__list > li > span",o).prop("tabindex",1),this.obj.$trigger.unbind().click(function(o){return o.stopPropagation(),e.obj.id=s(this).attr("id"),e.$el.hasClass("slds-is-open")?(e.$el.removeClass("slds-is-open"),e.obj.$dropdown.unbind("keyup",e.processKeypress)):(s('[data-aljs="picklist"]').not(e.$el).picklist("close"),e.$el.addClass("slds-is-open"),null===e.obj.valueId||"undefined"==typeof e.obj.valueId?e.focusedIndex=null:e.focusedIndex=e.obj.$dropdown.find("li").index(e.obj.$dropdown.find("#"+e.obj.valueId)),e.focusOnElement(),e.obj.$dropdown.on("keyup",e,e.processKeypress)),!1}),s("body").click(function(){e.$el.removeClass("slds-is-open"),e.obj.$dropdown.unbind("keyup",e.processKeypress)}).keyup(function(e){27===e.keyCode&&s('[data-aljs="picklist"]').picklist("close")})},processKeypress:function(s){var e=s.data,o=e.obj.$choices.length;switch(s.keyCode){case 40:e.focusedIndex=e.focusedIndex===o-1?0:e.focusedIndex+1,e.focusOnElement();break;case 38:e.focusedIndex=0===e.focusedIndex?o-1:e.focusedIndex-1,e.focusOnElement();break;case 27:e.$el.picklist("close")}return!1},focusOnElement:function(){null!==this.focusedIndex&&this.obj.$choices.eq(this.focusedIndex).focus()},bindChoices:function(){var e=this;this.obj.$valueContainer=s(".slds-lookup__search-input",this.$el),this.obj.$choices.unbind().click(function(o){o.stopPropagation();var i=s(this).closest("span").attr("id");e.setValueAndUpdateDom(i),e.settings.onChange(e.obj)})},setValueAndUpdateDom:function(s){var e=this.$el.find("#"+s);this.obj.value=e.text().trim(),this.obj.valueId=s,this.$el.removeClass("slds-is-open"),this.obj.$dropdown.unbind("keyup",this.processKeypress),this.obj.$trigger.trigger("change.aljs.picklist").focus(),this.obj.$valueContainer.val(this.obj.value),this.obj.$choices.removeClass("slds-is-selected"),e.addClass("slds-is-selected")},setValue:function(s,e){this.setValueAndUpdateDom(s),e&&this.settings.onChange(this.obj)},getValueId:function(){return this.obj.valueId},getValue:function(){return this.obj},close:function(){this.$el.removeClass("slds-is-open"),this.obj.$dropdown.unbind("keyup",this.processKeypress)}},s.fn.picklist=function(o){var i,t=arguments,n=s.extend({assetsLocation:s.aljs.assetsLocation,onChange:function(s){}},"object"==typeof o?o:{});if(this.each(function(){var l=s(this),d=l.data("aljs-picklist");if(!d){var c=new e(this,n);l.data("aljs-picklist",d=c)}"string"==typeof o&&(i=d[o](t[1],t[2]))}),void 0===i||i instanceof e)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return i}}(jQuery);